# äº¤äº’æ¨¡å¼å®Œæ•´å®ç°è§„åˆ’ï¼ˆä¿®æ­£ç‰ˆï¼‰

## æ–‡æ¡£è¯´æ˜

æœ¬è§„åˆ’åŸºäºä»¥ä¸‹æ ¸å¿ƒç®—æ³•å’Œè®¾è®¡æ–‡æ¡£ï¼š
- `ç»³å­å®ç°ç®—æ³•.html` - Verlet ç»³å­ç‰©ç†ç³»ç»Ÿ
- `å®šæ»‘è½®åŠ¨æ»‘è½®å®ç°ç®—æ³•.html` - æ»‘è½®ç»„ç³»ç»Ÿ
- `è½´å¿ƒç‚¹å®ç°ç®—æ³•.html` - è½´å¿ƒç‚¹ä¸è½»æ†æ—‹è½¬
- `äº¤äº’åŠŸèƒ½å®ç°è§„åˆ’æ–‡ä»¶.md` - åŸºç¡€äº¤äº’æ¡†æ¶
- `äº¤äº’æ¨¡å¼ä¸æ¨¡æ‹Ÿæ¨¡å¼å®ç°è§„åˆ’.md` - æ¨¡å¼è®¾è®¡

---

## æ ¸å¿ƒæ¦‚å¿µï¼ˆé‡è¦ï¼‰

### æ¨¡æ‹Ÿæ¨¡å¼ vs äº¤äº’æ¨¡å¼

**è¿™æ˜¯ä¸¤ç§å®Œå…¨ä¸åŒçš„ç‰©ç†åœºæ™¯æ¨¡å¼ï¼Œç”±åç«¯å¤§æ¨¡å‹è‡ªåŠ¨åˆ¤æ–­**

| ç‰¹æ€§ | æ¨¡æ‹Ÿæ¨¡å¼ï¼ˆå·²æœ‰ï¼‰ | äº¤äº’æ¨¡å¼ï¼ˆæ–°å¢ï¼‰ |
|------|----------------|----------------|
| **é€‚ç”¨åœºæ™¯** | æœ‰æ˜ç¡®ç‰©ç†å‚æ•°çš„é¢˜ç›® | æ— æ³•è®¡ç®—æ•°æ®æˆ–é€‚åˆæ¢ç´¢çš„åœºæ™¯ |
| **ç¤ºä¾‹** | æ»‘å—ç¢°æ’ï¼ˆæœ‰é€Ÿåº¦ã€è§’åº¦ï¼‰ | æ»‘è½®ç»„ã€å•æ‘†ï¼ˆæ— åˆé€Ÿåº¦ï¼‰ |
| **åç«¯è¯†åˆ«** | `mode: "simulation"` | `mode: "interactive"` |
| **ç‰©ä½“åˆå§‹å‚æ•°** | æœ‰åˆé€Ÿåº¦ã€è§’åº¦ç­‰ | åªæœ‰è´¨é‡ã€æ‘©æ“¦ç­‰åŸºæœ¬å‚æ•° |
| **ç‰©ä½“åˆå§‹çŠ¶æ€** | æœ‰åˆå§‹è¿åŠ¨ | é™æ­¢ï¼ˆå—é‡åŠ›ï¼‰ |
| **ç”¨æˆ·äº¤äº’** | âŒ ä¸å¯æ‹–æ‹½ | âœ… å¯æ‹–æ‹½ |
| **å‰ç«¯è¡¨ç°** | åƒ"æ’­æ”¾è§†é¢‘" | åƒ"ç‰©ç†æ²™ç›’" |
| **æ¨¡å¼åˆ‡æ¢** | æ— éœ€åˆ‡æ¢ï¼Œåç«¯å†³å®š | æ— éœ€åˆ‡æ¢ï¼Œåç«¯å†³å®š |

**å…³é”®**ï¼š
- âœ… ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡åï¼Œåç«¯è‡ªåŠ¨åˆ¤æ–­ä½¿ç”¨å“ªç§æ¨¡å¼
- âœ… å‰ç«¯æ ¹æ® `mode` å­—æ®µå†³å®šæ˜¯å¦æ·»åŠ é¼ æ ‡äº¤äº’
- âŒ ä¸éœ€è¦å‰ç«¯æä¾›"åˆ‡æ¢æ¨¡å¼"æŒ‰é’®
- âŒ äº¤äº’æ¨¡å¼æ²¡æœ‰"æ’­æ”¾/æš‚åœ"æŒ‰é’®

---

## å®ç°è·¯çº¿å›¾

æœ¬è§„åˆ’åˆ†ä¸º **5 ä¸ªæ­¥éª¤**ï¼š

| æ­¥éª¤ | åŠŸèƒ½æ¨¡å— | æ ¸å¿ƒå†…å®¹ |
|------|---------|---------|
| **ç¬¬ä¸€æ­¥** | æ¨¡å¼åˆ¤æ–­ä¸äº¤äº’æ¡†æ¶ | æ ¹æ®åç«¯ mode å­—æ®µå¯ç”¨/ç¦ç”¨æ‹–æ‹½ |
| **ç¬¬äºŒæ­¥** | Verlet ç»³å­ç³»ç»Ÿ | æŸ”æ€§ç»³å­ç‰©ç†æ¨¡æ‹Ÿ |
| **ç¬¬ä¸‰æ­¥** | å®šæ»‘è½®ä¸åŠ¨æ»‘è½® | ç»³å­ç»•è¿‡æ»‘è½®ï¼Œæ»‘è½®æ—‹è½¬ |
| **ç¬¬å››æ­¥** | è½´å¿ƒç‚¹ä¸è½»æ† | åˆšæ€§æ†æ—‹è½¬ï¼Œå•æ‘†/åœ†å‘¨è¿åŠ¨ |
| **ç¬¬äº”æ­¥** | å¤šç³»ç»Ÿè”åŠ¨ | å¤æ‚åœºæ™¯æ•´åˆæµ‹è¯• |

---

## æ ¸å¿ƒå‚æ•°æå–

### 1. ç»³å­å‚æ•°ï¼ˆæ¥è‡ª `ç»³å­å®ç°ç®—æ³•.html`ï¼‰

```javascript
const ropeParams = {
  segments: 50,        // ç»³å­èŠ‚ç‚¹æ•°
  stiffness: 0.95,     // åˆšåº¦ï¼ˆå‡ ä¹ä¸å¯ä¼¸é•¿ï¼‰
  damping: 0.98,       // é˜»å°¼ç³»æ•°
  gravity: 0.15,       // é‡åŠ›åŠ é€Ÿåº¦
  iterations: 20,      // çº¦æŸæ±‚è§£è¿­ä»£æ¬¡æ•°
  tensionForce: 0.0003 // ç»³å­æ‹‰åŠ›ç³»æ•°
};
```

### 2. æ»‘è½®å‚æ•°

```javascript
// å®šæ»‘è½®
const fixedPulleyParams = {
  radius: 30,
  isStatic: true,      // ä½ç½®å›ºå®š
  hasSprite: true,     // ğŸ”‘ éœ€è¦ç²¾çµå›¾
  spriteUrl: '...'
};

// åŠ¨æ»‘è½®
const movablePulleyParams = {
  radius: 30,
  isStatic: false,     // å¯ç§»åŠ¨
  hasSprite: true,     // ğŸ”‘ éœ€è¦ç²¾çµå›¾
  spriteUrl: '...',
  forceScale: 0.00015
};
```

### 3. è½»æ†å‚æ•°

```javascript
const rodParams = {
  stiffness: 1.0,      // å®Œå…¨åˆšæ€§
  damping: 0.01,
  hasSprite: true,     // ğŸ”‘ éœ€è¦ç²¾çµå›¾
  spriteUrl: '...'
};
```

---

## ç”¨æˆ·å®Œæ•´æµç¨‹

### æµç¨‹å›¾

```
ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡
    â†“
åç«¯å¤§æ¨¡å‹åˆ†æ
    â†“
åˆ¤æ–­æ¨¡å¼ â† ğŸ”‘ å…³é”®å†³ç­–ç‚¹
    â†“
    â”œâ”€â†’ æ¨¡æ‹Ÿæ¨¡å¼ (mode: "simulation")
    â”‚   - è¿”å›ç‰©ä½“ + åˆé€Ÿåº¦
    â”‚   - enableInteraction: false
    â”‚   - å‰ç«¯ï¼šä¸æ·»åŠ é¼ æ ‡çº¦æŸ
    â”‚   - ç”¨æˆ·ï¼šåªèƒ½è§‚çœ‹
    â”‚
    â””â”€â†’ äº¤äº’æ¨¡å¼ (mode: "interactive")
        - è¿”å›ç‰©ä½“ï¼ˆæ— åˆé€Ÿåº¦ï¼‰
        - enableInteraction: true
        - å‰ç«¯ï¼šæ·»åŠ é¼ æ ‡çº¦æŸ
        - ç”¨æˆ·ï¼šå¯æ‹–æ‹½æ¢ç´¢
```

### åç«¯è¿”å›æ•°æ®ç¤ºä¾‹

**æ¨¡æ‹Ÿæ¨¡å¼**ï¼š
```json
{
  "mode": "simulation",
  "enableInteraction": false,
  "objects": [
    {
      "name": "æ»‘å—A",
      "role": "dynamic",
      "parameters": {
        "initial_velocity_px_s": 200,  // æœ‰åˆé€Ÿåº¦
        "mass_kg": 2
      }
    }
  ]
}
```

**äº¤äº’æ¨¡å¼**ï¼š
```json
{
  "mode": "interactive",
  "enableInteraction": true,
  "objects": [
    {
      "name": "æ‘†çƒ",
      "role": "dynamic",
      "parameters": {
        "mass_kg": 1  // åªæœ‰åŸºæœ¬å‚æ•°ï¼Œæ— åˆé€Ÿåº¦
      }
    },
    {
      "name": "å®šæ»‘è½®",
      "role": "pulley_fixed",
      "sprite": {
        "url": "/sprites/fixed_pulley.png"  // ğŸ”‘ ç²¾çµå›¾
      }
    }
  ],
  "constraints": [
    {
      "constraintType": "rope",
      "startPoint": {...},
      "endPoint": {...}
    }
  ]
}
```

---

## å‰ç«¯å®ç°è¦ç‚¹

### è¦ç‚¹ 1ï¼šæ ¹æ® mode å†³å®šæ˜¯å¦æ·»åŠ äº¤äº’

```javascript
export function runSimulation({ mode, enableInteraction, objects, ... }) {
  
  // ... åˆ›å»ºç‰©ä½“ ...
  
  let mouseConstraint = null;
  
  // ğŸ”‘ åªåœ¨äº¤äº’æ¨¡å¼ä¸‹æ·»åŠ é¼ æ ‡çº¦æŸ
  if (mode === 'interactive' && enableInteraction) {
    const mouse = Mouse.create(render.canvas);
    mouseConstraint = MouseConstraint.create(engine, {
      mouse: mouse,
      constraint: {
        stiffness: 0.2,
        render: { visible: false }
      }
    });
    Composite.add(engine.world, mouseConstraint);
  }
  
  // ç«‹å³å¯åŠ¨å¼•æ“ï¼ˆä¸¤ç§æ¨¡å¼éƒ½è¿è¡Œï¼‰
  Runner.run(runner, engine);
  
  return {
    engine,
    runner,
    render,
    mode  // è¿”å›æ¨¡å¼ä¿¡æ¯
  };
}
```

### è¦ç‚¹ 2ï¼šäº¤äº’æ¨¡å¼ä¸‹çš„UI

```jsx
{/* ğŸ”‘ åªåœ¨äº¤äº’æ¨¡å¼ä¸‹æ˜¾ç¤ºé‡ç½®æŒ‰é’® */}
{canDownload && simulationMode === 'interactive' && (
  <button 
    onClick={handleResetSimulation}
    style={{
      position: 'absolute',
      bottom: '20px',
      right: '20px',
      padding: '12px 24px',
      backgroundColor: '#ff6600',
      color: '#fff',
      border: 'none',
      borderRadius: '8px',
      cursor: 'pointer',
      fontSize: '16px'
    }}
  >
    ğŸ”„ é‡ç½®åœºæ™¯
  </button>
)}
```

### è¦ç‚¹ 3ï¼šç²¾çµå›¾æ˜¾ç¤º

```javascript
// æ»‘è½®ã€è½»æ†éƒ½éœ€è¦æ˜¾ç¤ºç²¾çµå›¾
objects.forEach(obj => {
  const body = Bodies.fromVertices(..., {
    render: {
      sprite: obj.sprite ? {
        texture: obj.sprite.url,  // ğŸ”‘ ç²¾çµå›¾è·¯å¾„
        xScale: sx,
        yScale: sy
      } : undefined
    }
  });
});
```

---

## å…¸å‹åœºæ™¯å¯¹æ¯”

### åœºæ™¯ 1ï¼šæ»‘å—ç¢°æ’ï¼ˆæ¨¡æ‹Ÿæ¨¡å¼ï¼‰

**ç‰¹å¾**ï¼š
- é¢˜ç›®ç»™å‡ºäº†æ»‘å—Aé€Ÿåº¦ï¼š2m/s
- é¢˜ç›®ç»™å‡ºäº†ç¢°æ’è§’åº¦ç­‰

**åç«¯è¿”å›**ï¼š
```json
{
  "mode": "simulation",
  "enableInteraction": false,
  "objects": [
    { "name": "æ»‘å—A", "initial_velocity_px_s": 200 }
  ]
}
```

**å‰ç«¯è¡¨ç°**ï¼š
- åˆ›å»ºåæ»‘å—Aç«‹å³è¿åŠ¨
- ç”¨æˆ·æ— æ³•æ‹–æ‹½
- åªèƒ½è§‚çœ‹æ¨¡æ‹Ÿè¿‡ç¨‹

---

### åœºæ™¯ 2ï¼šæ»‘è½®ç»„ï¼ˆäº¤äº’æ¨¡å¼ï¼‰

**ç‰¹å¾**ï¼š
- å›¾ç‰‡ä¸­åªæœ‰æ»‘è½®ç»„ç»“æ„
- æ²¡æœ‰ç»™å‡ºä»»ä½•åˆå§‹é€Ÿåº¦
- é€‚åˆç”¨æˆ·æ¢ç´¢çœåŠ›åŸç†

**åç«¯è¿”å›**ï¼š
```json
{
  "mode": "interactive",
  "enableInteraction": true,
  "objects": [
    { "name": "å®šæ»‘è½®", "role": "pulley_fixed", "sprite": {...} },
    { "name": "åŠ¨æ»‘è½®", "role": "pulley_movable", "sprite": {...} },
    { "name": "é‡ç‰©", "mass_kg": 5 }
  ],
  "constraints": [
    { "constraintType": "rope", ... }
  ]
}
```

**å‰ç«¯è¡¨ç°**ï¼š
- åˆ›å»ºåç‰©ä½“é™æ­¢ï¼ˆå—é‡åŠ›ï¼‰
- ç”¨æˆ·å¯ä»¥æ‹–æ‹½é‡ç‰©å‘ä¸‹
- è§‚å¯ŸåŠ¨æ»‘è½®è¢«æ‰˜èµ·
- å³ä¸‹è§’æœ‰"ğŸ”„ é‡ç½®åœºæ™¯"æŒ‰é’®

---

### åœºæ™¯ 3ï¼šå•æ‘†ï¼ˆäº¤äº’æ¨¡å¼ï¼‰

**ç‰¹å¾**ï¼š
- å›¾ç‰‡ä¸­æœ‰å•æ‘†ç»“æ„
- æ²¡æœ‰ç»™å‡ºé‡Šæ”¾è§’åº¦

**åç«¯è¿”å›**ï¼š
```json
{
  "mode": "interactive",
  "enableInteraction": true,
  "objects": [
    { "name": "æ‘†çƒ", "mass_kg": 1 }
  ],
  "constraints": [
    { "constraintType": "rope", "startPoint": "å›ºå®šç‚¹", "endPoint": "æ‘†çƒ" }
  ]
}
```

**å‰ç«¯è¡¨ç°**ï¼š
- æ‘†çƒæ‚¬æŒ‚åœ¨ç»³å­ä¸Š
- ç”¨æˆ·æ‹–åŠ¨æ‘†çƒåˆ°ä»»æ„è§’åº¦
- æ¾æ‰‹åè§‚å¯Ÿæ‘†åŠ¨
- å¯ä»¥åå¤æµ‹è¯•ä¸åŒè§’åº¦

---

## ä¸‹ä¸€æ­¥æ–‡æ¡£

è¯¦ç»†çš„å®ç°æ­¥éª¤å°†åˆ†ä¸ºä»¥ä¸‹ç‹¬ç«‹æ–‡æ¡£ï¼š

1. **äº¤äº’æ¨¡å¼å®ç°-ç¬¬ä¸€æ­¥-æ¨¡å¼åˆ¤æ–­.md** - æ ¹æ® mode å¯ç”¨äº¤äº’
2. **äº¤äº’æ¨¡å¼å®ç°-ç¬¬äºŒæ­¥-ç»³å­ç³»ç»Ÿ.md** - Verlet ç»³å­
3. **äº¤äº’æ¨¡å¼å®ç°-ç¬¬ä¸‰æ­¥-æ»‘è½®ç³»ç»Ÿ.md** - å®šæ»‘è½®ä¸åŠ¨æ»‘è½®ï¼ˆå¸¦ç²¾çµå›¾ï¼‰
4. **äº¤äº’æ¨¡å¼å®ç°-ç¬¬å››æ­¥-è½´å¿ƒè½»æ†.md** - è½»æ†æ—‹è½¬ï¼ˆå¸¦ç²¾çµå›¾ï¼‰
5. **äº¤äº’æ¨¡å¼å®ç°-ç¬¬äº”æ­¥-è”åŠ¨æµ‹è¯•.md** - å¤æ‚åœºæ™¯æ•´åˆ

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv2.0ï¼ˆä¿®æ­£ç‰ˆï¼‰  
**ä¿®æ­£æ—¥æœŸ**ï¼š2025-12-20  
**æ ¸å¿ƒä¿®æ­£**ï¼š
- âœ… æ˜ç¡®æ¨¡æ‹Ÿæ¨¡å¼ vs äº¤äº’æ¨¡å¼çš„åŒºåˆ«
- âœ… åç«¯è‡ªåŠ¨åˆ¤æ–­ï¼Œå‰ç«¯æ— éœ€åˆ‡æ¢
- âœ… äº¤äº’æ¨¡å¼æ— æ’­æ”¾æŒ‰é’®ï¼Œåªæœ‰é‡ç½®æŒ‰é’®
- âœ… æ»‘è½®ã€è½»æ†éœ€è¦ç²¾çµå›¾

